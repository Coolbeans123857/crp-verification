<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CRP OAuth Verification</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
        background-color: #2e2e2e;
        color: #fff;
        text-align: center;
    }
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    h1, p, .btn {
        opacity: 0;
        animation: fadeIn 1s forwards;
    }
    h1 { color: #00bfff; font-size: 1.8em; margin-bottom: 20px; animation-delay: 0.2s; }
    p { font-size: 1em; margin-bottom: 40px; animation-delay: 0.4s; }
    .btn {
        display: block;
        width: 80%;
        max-width: 300px;
        margin: 0 auto;
        padding: 20px;
        background-color: #e74c3c;
        color: white;
        text-decoration: none;
        border-radius: 10px;
        font-size: 1.2em;
        font-weight: bold;
        transition: background-color 0.3s;
        animation-delay: 0.6s;
    }
    .btn:hover { background-color: #c0392b; }
</style>
</head>
<body>
    <h1>CRP OAuth Verification</h1>
    <p id="message">Loading...</p>

    <a href="#" target="_blank" class="btn" id="verifyBtn">Start Verify</a>

    <script>
        const params = new URLSearchParams(window.location.search);
        const code = params.get('code');
        const state = params.get('state'); // optional
        const messageEl = document.getElementById('message');
        const button = document.getElementById('verifyBtn');

        // Replace with your OAuth info
        const clientId = "3362187719529762125";
        const redirectUri = window.location.href.split('?')[0]; // callback hosted on this page
        const scope = "openid";
        const randomState = "123abc"; // generate dynamically if needed

        if (code) {
            // User returned from Roblox OAuth
            messageEl.textContent = "✅ Verification complete! You can now return to the app.";
            button.style.display = "none";

            // Optional: redirect to your app
            // window.location.href = "myapp://verified?code=" + code;

        } else {
            // No code → show the Start Verify button
            messageEl.textContent = "Tap the button below to start Roblox verification.";
            button.href = `https://auth.roblox.com/oauth/authorize?client_id=${clientId}&response_type=code&redirect_uri=${encodeURIComponent(redirectUri)}&scope=${scope}&state=${randomState}`;
        }
    </script>
</body>
</html>

